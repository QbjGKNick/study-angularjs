<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://code.angularjs.org/1.5.6/angular.min.js"></script>
  <!-- <script src="https://cdn.staticfile.org/angular.js/1.4.6/angular.min.js"></script> -->
</head>
<body>
  <!-- $location 获取当前页面的URL -->
  <!-- <div ng-app="app" ng-controller="myCtrl">
    <p>当前页面的URL: </p>
    <h3>{{ url }}</h3>

    <p>该实例使用了内建的 $location 服务获取当前页面的 URL。</p>
  </div>

  <script>
    var app = angular.module('app', [])
    app.controller('myCtrl', function ($scope, $location) {
      $scope.url = $location.absUrl()
    })
  </script> -->

  <!-- $http 服务 -->
  <!-- <div ng-app="app" ng-controller="myCtrl">
    <p>欢迎信息: </p>
    <h1>{{ welcome }}</h1>
  </div>

  <p> $http 服务向服务器请求信息，返回的值放入变量 “welcome” 中</p>

  <script>
    var app = angular.module('app', [])
    app.controller('myCtrl', function ($scope, $http) {
      $http.get('welcome.html').then(response => {
        $scope.welcome = response.data
      })
    })
  </script> -->

  <!-- $timeout 服务 -->
  <!-- <div ng-app="app" ng-controller="myCtrl">
    <p>两秒后显示信息: </p>
    <h1>{{ header }}</h1>
  </div>

  <p> $timeout 访问在规定的毫秒数后执行指定函数。</p>

  <script>
    var app = angular.module('app', [])
    app.controller('myCtrl', ($scope, $timeout) => {
      $scope.header = 'Hello World!'
      $timeout(() => {
        $scope.header = 'How are you today?'
      }, 2000)
    })
  </script> -->

  <!-- $interval 服务 -->
  <!-- <div ng-app="app" ng-controller="myCtrl">
    <p>现在时间是:</p>
    <h1>{{ currentTime }}</h1>

  </div>

  <p>$interval 访问在指定的周期(以毫秒计)来调用函数或计算表达式。</p>
  
  <script>
    var app = angular.module('app', [])
    app.controller('myCtrl', ($scope, $interval) => {
      $scope.currentTime = new Date().toLocaleTimeString()
      $interval(() => {
        $scope.currentTime = new Date().toLocaleTimeString()
      }, 1000) 
    })
  </script> -->

  <!-- 创建自定义服务 -->
  <!-- <div ng-app="app" ng-controller="myCtrl">
    <p>255 的16进制是: </p>
    <h1>{{ hex }}</h1>
  </div>
    
  <p>自定义服务，用于转换16进制数：</p>

  <script>
    var app = angular.module('app', [])

    app.service('hexafy', function () {
      this.myFunc = (x) => x.toString(16)
    })

    app.controller('myCtrl', ($scope, hexafy) => {
      $scope.hex = hexafy.myFunc(255)
    })
  </script> -->

  <!-- 过滤器中使用自定义服务 -->
  <div ng-app="app" ng-controller="myCtrl">
    在过滤器中使用服务:
    <h1>{{ 255 | myFormat }}</h1>
    <ul>
      <li ng-repeat="x in counts">{{ x | formatCount }}</li>
    </ul>
  </div>

  <script>
    var app = angular.module('app', [])
    app.service('hexafy', function () {
      this.myFunc = x => x.toString(16)
    })

    
    app.filter('myFormat', ['hexafy', hexafy => x => hexafy.myFunc(x)])
    
    app.service('countfy', function () {
      this.myFunc = x => x.toString(16)
    })
    app.filter('formatCount', ['countfy', countfy => x => countfy.myFunc(x)])

    app.controller('myCtrl', ($scope) => {
      $scope.counts = [255, 251, 200]
    })
  </script>

</body>
</html>